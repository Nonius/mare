:trait Spec
  :prop env Env
  :prop failures Array(SourceCodePosition): []
  :new (@env)
  
  :fun no_failures: @failures.size == 0 // TODO: remove
  
  :fun ref "assert=" (
    success Bool
    pos SourceCodePosition = source_code_position_of_argument success
  )
    if success.not (@failures << pos)
    success
